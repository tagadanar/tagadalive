/*
 * L'objet Danger contient un combo représentant un ensemble d'actions et les dommages approximatifs de ces actions.
 * Le combo est une chaîne de caractères et est utilisé à des fins de tests / debugs.
 *
 * Tracks two damage types:
 *   - dmg: instant HP damage (EFFECT_DAMAGE), reduced by instant heals
 *   - psnDmg: HP over time damage (EFFECT_POISON), reduced by heal over time
 */
class Danger {
	Cell cell
	real dmg      // HP damage (instant, from EFFECT_DAMAGE)
	real psnDmg   // HPTIME damage (over time, from EFFECT_POISON)
	string combo
	real score

	constructor(Cell cell, real dmg, real psnDmg, string str, Consequences? consequences) {
		this.cell = cell
		this.dmg = dmg
		this.psnDmg = psnDmg
		this.combo = str

		real totalDmg = dmg + psnDmg
		this.score = -totalDmg
		if (!Fight.self.isBulb && totalDmg >= Fight.self.getCurrentHP(consequences))
			this.score += ScoringConfig.DEATH_VALUE
	}

	/*
	 * Format chaîne de caracteres utilisée pour des tests / debugs.
	 */
	string string() {
		return '<Danger ' + this.cell + ':dmg=' + round(this.dmg) + ':psn=' + round(this.psnDmg) + ':' + this.combo + '>'
	}
}
