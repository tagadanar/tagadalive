class Stats {
	// The Singleton's instance is stored in a static field.
	private static HiddenSingleton? _instance = null
	private constructor(){}
	
	// This is the static method that controls the access to the singleton instance.
	// On the first run, it creates a singleton object and places it into the static field.
	// On subsequent runs, it returns the existing object stored in the static field.
	public static HiddenSingleton getInstance(){
		if (_instance == null){
			_instance = new HiddenSingleton();
		}
		return _instance!;
	}
	
	public static Array<string> getFields(){
		return Stats.getInstance().class.fields
	}

	static integer HP 			= Stats.getInstance().HP
	static integer HPTIME		= Stats.getInstance().HPTIME
	static integer HPMAX		= Stats.getInstance().HPMAX
	static integer ABSSHIELD 	= Stats.getInstance().ABSSHIELD
	static integer RELSHIELD 	= Stats.getInstance().RELSHIELD
	static integer DMGRETURN 	= Stats.getInstance().DMGRETURN
	static integer STR 			= Stats.getInstance().STR
	static integer MGC 			= Stats.getInstance().MGC
	static integer RST 			= Stats.getInstance().RST
	static integer WSD 			= Stats.getInstance().WSD
	static integer AGI 			= Stats.getInstance().AGI
	static integer SNC			= Stats.getInstance().SNC
	static integer TP 			= Stats.getInstance().TP
	static integer MP	 		= Stats.getInstance().MP
	static integer PWR			= Stats.getInstance().PWR
	static integer DEBUFF 		= Stats.getInstance().DEBUFF // should i delete this ?
	static integer ANTIDOTE 	= Stats.getInstance().ANTIDOTE // should i delete this ?
	static integer KILL			= Stats.getInstance().KILL

	// Game mechanic constants
	static integer DMG_EROSION_DIVISOR = 20 // damage / divisor = max HP lost
	static integer PSN_EROSION_DIVISOR = 10 // poison damage / divisor = max HP lost

	static Map<integer, integer> entityEffectType_to_stats = [
		EFFECT_POISON: 					Stats.getInstance().HPTIME,
		EFFECT_VULNERABILITY: 			Stats.getInstance().RELSHIELD,
		EFFECT_ABSOLUTE_VULNERABILITY: 	Stats.getInstance().ABSSHIELD,
		EFFECT_SHACKLE_AGILITY:			Stats.getInstance().AGI,
		EFFECT_SHACKLE_WISDOM:			Stats.getInstance().WSD,
		EFFECT_SHACKLE_MAGIC:			Stats.getInstance().MGC,
		EFFECT_SHACKLE_STRENGTH:		Stats.getInstance().STR,
		EFFECT_SHACKLE_MP:				Stats.getInstance().MP,
		EFFECT_SHACKLE_TP:				Stats.getInstance().TP,
		EFFECT_AFTEREFFECT: 			Stats.getInstance().HPTIME,

		EFFECT_HEAL: 					Stats.getInstance().HPTIME,
		EFFECT_RAW_ABSOLUTE_SHIELD: 	Stats.getInstance().ABSSHIELD,
		EFFECT_RAW_BUFF_AGILITY: 		Stats.getInstance().AGI,
		EFFECT_RAW_BUFF_MAGIC: 			Stats.getInstance().MGC,
		EFFECT_RAW_BUFF_MP: 			Stats.getInstance().MP,
		EFFECT_RAW_BUFF_RESISTANCE: 	Stats.getInstance().RST,
		EFFECT_RAW_BUFF_SCIENCE: 		Stats.getInstance().SNC,
		EFFECT_RAW_BUFF_STRENGTH: 		Stats.getInstance().STR,
		EFFECT_RAW_BUFF_TP: 			Stats.getInstance().TP,
		EFFECT_RAW_BUFF_WISDOM: 		Stats.getInstance().WSD,
		EFFECT_BUFF_AGILITY: 			Stats.getInstance().AGI,
		EFFECT_BUFF_MP: 				Stats.getInstance().MP,
		EFFECT_BUFF_RESISTANCE: 		Stats.getInstance().RST,
		EFFECT_BUFF_STRENGTH: 			Stats.getInstance().STR,
		EFFECT_BUFF_TP: 				Stats.getInstance().TP,
		EFFECT_BUFF_WISDOM: 			Stats.getInstance().WSD,
		EFFECT_ABSOLUTE_SHIELD: 		Stats.getInstance().ABSSHIELD,
		EFFECT_RELATIVE_SHIELD: 		Stats.getInstance().RELSHIELD,
		EFFECT_DAMAGE_RETURN: 			Stats.getInstance().DMGRETURN,
	]
}

// n'est utilisé que pour sa propriété class.fields pour parcourir les stats, ne jamais instancier ailleurs
// OUI J'aurais pu faire un tableau "key":value, MAIS .fields c'est quand mm beaucoup plus class non ?
class HiddenSingleton{
	integer HP 			= 0
	integer HPTIME		= 1
	integer HPMAX		= 2
	integer ABSSHIELD 	= 3
	integer RELSHIELD 	= 4
	integer DMGRETURN 	= 5
	integer STR 		= 6
	integer MGC 		= 7
	integer RST 		= 8
	integer WSD 		= 9
	integer AGI 		= 10
	integer SNC			= 11
	integer TP 			= 12
	integer MP	 		= 13
	integer PWR			= 14
	integer DEBUFF 		= 15
	integer ANTIDOTE 	= 16
	integer KILL		= 17
}