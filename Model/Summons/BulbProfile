/*
 * BulbProfile - Static definition of a bulb type's stat ranges
 */
class BulbProfile {
	integer bulbType       // Entity.BULB_LIGHTNING, etc.
	integer summonChip     // CHIP_LIGHTNING_BULB

	// Stat ranges [min, max] - linearly interpolated by summoner level
	integer lifeMin
	integer lifeMax
	integer strMin
	integer strMax
	integer agiMin
	integer agiMax
	integer mpMin
	integer mpMax
	integer tpMin
	integer tpMax
	integer sncMin  // science
	integer sncMax
	integer wsdMin  // wisdom
	integer wsdMax
	integer mgcMin  // magic
	integer mgcMax
	integer rstMin  // resistance
	integer rstMax

	constructor(
		integer bulbType, integer summonChip,
		integer lifeMin, integer lifeMax,
		integer strMin, integer strMax,
		integer agiMin, integer agiMax,
		integer mpMin, integer mpMax,
		integer tpMin, integer tpMax,
		integer sncMin, integer sncMax,
		integer wsdMin, integer wsdMax,
		integer mgcMin, integer mgcMax,
		integer rstMin, integer rstMax
	) {
		this.bulbType = bulbType
		this.summonChip = summonChip
		this.lifeMin = lifeMin
		this.lifeMax = lifeMax
		this.strMin = strMin
		this.strMax = strMax
		this.agiMin = agiMin
		this.agiMax = agiMax
		this.mpMin = mpMin
		this.mpMax = mpMax
		this.tpMin = tpMin
		this.tpMax = tpMax
		this.sncMin = sncMin
		this.sncMax = sncMax
		this.wsdMin = wsdMin
		this.wsdMax = wsdMax
		this.mgcMin = mgcMin
		this.mgcMax = mgcMax
		this.rstMin = rstMin
		this.rstMax = rstMax
	}

	/*
	 * Compute bulb stats based on summoner level
	 * Formula: floor(min + (max - min) * min(300, level) / 300)
	 * Note: Max level is 301, but LeekWars scales bulb stats over 300 (official game formula)
	 */
	BulbStats computeStats(integer summonerLevel) {
		// LeekWars official formula: stats scale linearly from min to max over levels 1-300
		real ratio = min(300, summonerLevel) / 300.0
		return BulbStats(
			floor(this.lifeMin + (this.lifeMax - this.lifeMin) * ratio),
			floor(this.strMin + (this.strMax - this.strMin) * ratio),
			floor(this.agiMin + (this.agiMax - this.agiMin) * ratio),
			floor(this.mpMin + (this.mpMax - this.mpMin) * ratio),
			floor(this.tpMin + (this.tpMax - this.tpMin) * ratio),
			floor(this.sncMin + (this.sncMax - this.sncMin) * ratio),
			floor(this.wsdMin + (this.wsdMax - this.wsdMin) * ratio),
			floor(this.mgcMin + (this.mgcMax - this.mgcMin) * ratio),
			floor(this.rstMin + (this.rstMax - this.rstMin) * ratio)
		)
	}
}
